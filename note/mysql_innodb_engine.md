本文档记载《MySQL技术内幕innodb存储引擎》的读书笔记

1、概念定义
        |-数据库：物理操作系统上的文件或其他形式文件的集合，即存储在硬盘上的文件（或者是存储于内存中的）
概念   -|
        |-数据库实例：由数据库后台进程/线程和内存共享区域组成，共享内存可以被进程/线程共享，数据库实例是用来操作数据库的

2、MySQL组成部分

                |-管理工具 -|-MySQL服务安装后提供的命令
                |    
                |           |-验证连接
                |-连接池   -|-检测空闲线程
                |           |-检测是否有硬件资源供线程使用
                |    
                |-SQL接口  -|-把sql命令提交给MySQL进程处理
                |   
MySQL工作原理  -|-分析器   -|-检测sql命令是否有语法错误
                |    
                |           |-优化sql命令
                |-优化器   -|-效果最明显体现于查询sql命令
                |           |-以最节约系统资源的方式执行sql命令
                |   
                |           |-用于缓存查询结果
                |-查询缓存 -|  
                |           |-缓存空间是从物理内存中划分出来的
                |   
                |-存储引擎 -|-表的处理器:存储引擎是插件式的，存储引擎基于表，而不是数据库
                |   
                |-文件系统 -|-存储数据的磁盘

3、inondb引擎的后台线程

                                                |-insert buffer thread（1个）
                                                |-log thread（1个）
                        |-IO线程（10个）       -|
                        |                       |-read thread（4个）   -|-innodb_read_io_threads
                        |                       |-write thread（4个）  -|-innodb_write_io_threads
                        |
后台线程（默认情况下） -|-master线程（1个）
                        |-lock锁监控线程（1个）
                        |-错误线程（1个）

4、innodb存储引擎组成

        |-缓冲池（buffer pool）                -|-innodb_buffer_pool_size（128M） 
组成   -|-重做日志缓冲池（redo log buffer）    -|-innodb_log_buffer_size(8M)
        |-额外内存池（additional memory pool） -|-innodb_additional_mem_pool_size(8M)

5、组件详解

缓冲池是占内存最大的部分，用来存储各种数据的缓存，innodb存储引擎的工作方式是将数据库文件按页（每页16K）读取到缓冲池，然后按照最少使用（LRU）的算法保留缓冲池中的数据，如果需要修改数据库文件，则首先修改的是内存缓冲池里边的数据，然后再按照一定的频率将缓冲池中的数据刷新回磁盘文件

        |-索引页
        |-数据页
        |-undo页
        |-插入缓冲（insert buffer）
缓冲池 -|
        |-自适应哈希索引（adaptive hash index）
        |-innodb存储的锁信息（lock info）
        |-数据字典信息（data directory）
        |-等

日志缓冲池：将重做日志信息先放入这个缓冲区，然后按照一定频率将缓存信息刷新到重做日志文件，该值一般不需要设置很大，一般情况下每一秒就会将重做日志缓冲刷新到日志文件，因此我们只需要保证每秒产生的事务量在这个缓冲值的大小内即可

额外内存池：在innodb存储引擎中，对内存管理是通过一种称为内存堆（heap）的方式进行的，对一些数据结构本身分配内存时，需要从额外内存池申请，当该区域的内存不够时，会从缓冲池申请。


